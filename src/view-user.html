<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/iron-list/iron-list.html">
<link rel="import" href="../bower_components/polymerfire/firebase-query.html">
<link rel="import" href="polython-challenge-item.html">
<link rel="import" href="shared-styles.html">

<dom-module id="view-user">
  <template>
    <style include="shared-styles">
      :host {
        display: block;

        padding: 10px;
      }
    </style>

    <firebase-query
      id="currentChallengeId"
      app-name="Polython Checkpoints"
      path="/activeChallenge"
      data="{{currentCallengeId}}">
    </firebase-query>

    <firebase-query
      id="currentChallenge"
      app-name="polython-checkpoints"
      path="/challenges/[[currentCallengeId]]"
      data="{{currentCallenge}}">
    </firebase-query>    

    <firebase-query
      id="pastChallenges"
      app-name="polython-checkpoints"
      path="/challenges"
      data="{{challenges}}">
    </firebase-query>    
    <div>1 [[currentChallengeId]]</div>
    <div>2 [[currentChallenge]]</div>
    <p>Retro actual<a href="/reto">reto</a></p>
    <iron-list items="[[challenges]]" >
      <template>
        <polython-challenge-item
         title=[[item.title]]
         description=[[item.description]]
         start-time=[[item.startTime]]
         end-time=[[item.endTime]]
         execution-time=[[item.executionTime]]
         picture-href=[[item.pictureHref]]
         location=[[item.location]]
         active=[[item.active]]
        >
        </polython-challenge-item>
      </template>
    </iron-list>
  </template>

  <script>
    class ViewUser extends Polymer.Element {
      static get is() { return 'view-user'; }

      static get properties() {
        return {
          currentChallengeId: {
            type: 'String'
          },
          currentChallenge: {
            type: 'Object'
          },
          challenges: {
            type: 'Array'
          }
        }
      }

      connectedCallback() {
        //this.challenges = this._getChallenges();
      }

      _getChallenges() {
        return [
          {
            title: 'Checkpoint con mariachi',
            description: 'Hazte una foto con el android Mariachi',
            startTime: '13:00',
            endTime: '13:30',
            executionTime: '13:05',
            location: 'x, y',
            pictureHref: 'https://1.bp.blogspot.com/-LqjVHEyDImU/V7buZvy_P_I/AAAAAAAAIeQ/YzrvMSnd06YDwf7heYz53qMg6rEm5GJWACLcB/s640/14045890_318329811851920_8508340804919828659_n.jpg',
            active: true
          },
          {
            title: 'Checkpoint goloso',
            description: 'Hazte una foto comiendo chocolates',
            startTime: '15:00',
            endTime: '15:30',
            executionTime: '15:21',
<<<<<<< HEAD
            location: 'x, y',
            pictureHref: 'http://www.bellabeat.com/blog/media/Indulging-in-a-sweet-affair-with-chocolate-000048186060_Small.jpg',
            active: false
=======
            location: undefined,
            pictureHref: 'http://www.bellabeat.com/blog/media/Indulging-in-a-sweet-affair-with-chocolate-000048186060_Small.jpg'
>>>>>>> Added firebase query
          },          
          {
            title: 'Checkpoint con frida',
            description: 'Hazte una foto con el logo de Frida',
            startTime: '17:00',
            endTime: '17:30',
            executionTime: undefined,
            location: undefined,
            active: false
          }          
        ]
      }
    }

    window.customElements.define(ViewUser.is, ViewUser);
  </script>
</dom-module>
